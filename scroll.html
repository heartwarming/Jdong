<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link href="css/yao.css" type="text/css" rel="stylesheet" media="all" />
	<link href="css/scrollnews.css" type="text/css" rel="stylesheet" media="all" />
	<base target="_blank" />
</head>

<body>
	<div class="wrap">
		<div id="script">
			<a href="http://www.jsdaima.com">
				<h1>会滚动的新闻列表和图片滚动代码-js代码网</h1>
			</a>
			<div id="scrolling">
				<div id="scrollnews">
					<div id="scrollnews_con">
						<ul>
							<li class="img"><img src="img/samples/girl-1.jpg" alt="图片1" /></li>
							<li class="first"><a>js代码网-解放出你的部分写代码时间来思考更高层次的设计</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li class="last"><a href="#1">ScrollNews 无缝循环滚动新闻 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
						<ul>
							<li class="img"><img src="img/samples/girl-2.jpg" alt="图片2" /></li>
							<li class="first">
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自助取按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自助取自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li class="last"><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
						<ul>
							<li class="img"><img src="img/samples/girl-3.jpg" alt="图片3" /></li>
							<li class="first">
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自助取按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取按键自助取款机 按键</a></li>
							<li class="last"><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
						<ul>
							<li class="img"><img src="img/samples/girl-4.jpg" alt="图片4" /></li>
							<li class="first"><a href="#1">胶水“冻住”自助（第4屏）按键自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li class="last"><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div id="scrolling_v">
				<div id="scrollnews_v">
					<div id="scrollnews_con_v">
						<ul>
							<li class="img"><img src="img/samples/girl-1.jpg" alt="图片1" /></li>
							<li class="first"><a href="#1">ScrollNews 无缝循环滚动新闻（第1屏）自助取款机</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li><a href="#1">ScrollNews 无缝循环滚动新闻 按键</a></li>
							<li class="last"><a href="#1">ScrollNews 无缝循环滚动新闻 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
						<ul>
							<li class="img"><img src="img/samples/girl-2.jpg" alt="图片2" /></li>
							<li class="first"><a href="#1">胶水“冻住”自助（第2屏）按键自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自助取按键自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li class="last"><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
						<ul>
							<li class="img"><img src="img/samples/girl-3.jpg" alt="图片3" /></li>
							<li class="first"><a href="#1">胶水“冻住”自助（第3屏）按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li class="last"><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
						<ul>
							<li class="img"><img src="img/samples/girl-4.jpg" alt="图片4" /></li>
							<li class="first"><a href="#1">胶水“冻住”自助（第4屏）按键自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自按键自助取款机 按键</a></li>
							<li><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键</a></li>
							<li><a>js代码网为您提供-js特效代码大全，JS广告代码，导航菜单代码，</a></li>
							<li><a href="#1">胶水“冻住”自助取自助取款机 按键</a></li>
							<li class="last"><a href="#1">胶水“冻住”自助取款机按键自助取款机 按键胶水“冻住”自助取款机按键自助取款机 按键自助取款机 按键</a></li>
						</ul>
					</div>
				</div>
			</div>
			<h2>程序简介</h2>
			<p>
				<strong>ScrollNews
					无缝循环滚动新闻</strong>，程序改编至雅虎中国的scrollVertical.js。修改后，新闻可以横向和纵向的滚动，并且滚动添加了加速和减速的平滑过度效果，让整个滚动新闻的滚动看上去更自然。
			</p>
			<h2>调用方法</h2>
			<p>
				<strong>第一步：</strong>在页面中调用scrollnews.js文件，例如：
			</p>
			<p>
				&lt;script type="text/javascript" src="js/scrollnews.js"&gt;&lt;/script&gt;
			</p>
			<p><strong>第二步：</strong>编写调用代码：<br />
			<pre>
			/* 
			方式一
			自己编写调用函数，分别设置横向和纵向的滚动新闻 
			这么写，自己写的代码更多，但是自己的可控性更多
			*/
			(function(){
				// 横向滚动
				var HScroll = new scrollNews({
					area: 'scrollnews',         // 包含滚动信息的父节点ID
					msg: 'scrollnews_con',      // 要滚动信息的ID 
					items: 'ul',                // 表示一行或一列滚动信息的HTML标签
					speed: 10,                  // 滚动速度
					direction: 'H'              // 滚动方向（可选）：H - 横向滚动、V（默认） - 垂直滚动
				}), HTimer = setTimeout(function(){
					if (HTimer) {
						clearTimeout(HTimer);
					}
					HScroll.isPause = false;
				}, HScroll.pauseTime);
				HScroll.scrollArea.onmouseover = function(){
					HScroll.isPause = true;
				};
				HScroll.scrollArea.onmouseout = function(){
					HScroll.isPause = false;
				};
				HScroll.play();
				
				// 纵向滚动
				var VScroll = new scrollNews({
					area: 'scrollnews_v',
					msg: 'scrollnews_con_v',
					items: 'ul',
					speed: 50
				}), VTimer = setTimeout(function(){
					if (VTimer) {
						clearTimeout(VTimer);
					}
					VScroll.isPause = false;
				}, VScroll.pauseTime);
				VScroll.scrollArea.onmouseover = function(){
					VScroll.isPause = true;
				};
				VScroll.scrollArea.onmouseout = function(){
					VScroll.isPause = false;
				};
				VScroll.play();
				
			})();


			/* 
			方式二
			使用我编写好的方法<strong>YScroll</strong>，只需要传递多个参数就可以一次调用多个混动新闻。 
			这么写，调用更方便， 不用每个混动新闻都自己编写相关的代码。
			但是这么写，就只能直接执行scrollnews对象的play()方法（滚动），可控性好较差。
			*/
			YScroll({
					area: 'scrollnews',
					msg: 'scrollnews_con',
					items: 'ul',
					speed: 10,
					direction: 'H'
				},{
					area: 'scrollnews_v',
					msg: 'scrollnews_con_v',
					items: 'ul',
					speed: 50
			});
				</pre>
						</p>
						<h2>程序代码</h2>
						<textarea>var scrollNews = function(config){
				var D = document, 
				unitTag = config.items ? config.items : 'li', 
				cloneTag = config.cloneTag ? config.cloneTag : 'div', 
				copydiv = null, 
				oSelf = this, 
				isString = function(s){
						return typeof s === 'string';
				};
				
				this.scrollArea = isString(config.area) ? document.getElementById(config.area) : config.area;
				this.scrollMsg = isString(config.msg) ? document.getElementById(config.msg) : config.msg;
				this.items = this.scrollMsg.getElementsByTagName(unitTag);
				this.length = this.items.length;
				this.itemWidth = this.items[0].offsetWidth;
				this.width = this.itemWidth * this.length;
				this.itemHeight = this.items[0].offsetHeight;
				this.height = this.itemHeight * this.length;
				
				if(config.direction){
					this.direction = config.direction.toUpperCase();
				}
				if (config.pauseTime) {
					this.pauseTime = config.pauseTime;
				}
				if (config.chgUnitTime) {
					this.chgUnitTime = config.chgUnitTime;
				}
				if(config.speed){
					this.speed = config.speed;
				}
				
				this.scrollMsg.style.position = 'absolute';
				this.scrollMsg.style.top = '0';
				this.scrollMsg.style.left = '0';
				
				copydiv = document.createElement('div');
				copydiv.id = oSelf.scrollArea.id + '_copymsgid';
				
				if (this.direction === 'V') {
					copydiv.style.height = oSelf.height + 'px';
					copydiv.style.left = '0';
					copydiv.style.top = oSelf.height + 'px';
				}
				else {
					copydiv.style.width = oSelf.width + 'px';
					copydiv.style.left = oSelf.width + 'px';
					copydiv.style.top = '0';
				}
				copydiv.style.position = 'absolute';
				
				copydiv.innerHTML = this.scrollMsg.innerHTML;
				this.scrollArea.appendChild(copydiv);
				this.copyMsg = copydiv;
			};

			scrollNews.prototype.scrollArea = null;
			scrollNews.prototype.scrollMsg = null;
			scrollNews.prototype.copyMsg = null;
			scrollNews.prototype.items = null;
			scrollNews.prototype.length = 0;
			scrollNews.prototype.itemWidth = 0;
			scrollNews.prototype.itemHeight = 0;
			scrollNews.prototype.width = 0;
			scrollNews.prototype.height = 0;
			scrollNews.prototype.scrollValue = 0;
			scrollNews.prototype.scrollWidth = 0;
			scrollNews.prototype.scrollHeight = 0;
			scrollNews.prototype.direction = 'V';
			scrollNews.prototype.isPause = true;
			scrollNews.prototype.scrollTimer = null;
			scrollNews.prototype.chgUnitTime = 4000;
			scrollNews.prototype.pauseTime = 2000;
			scrollNews.prototype.speed = 50;
			scrollNews.prototype.lastIndex = 0;

			scrollNews.prototype.play = function(){
				var oSelf = this, anim = function(){
					var dist = 0;
					if (oSelf.scrollTimer) {
						clearTimeout(oSelf.scrollTimer);
					}
					if (oSelf.isPause) {
						oSelf.scrollTimer = setTimeout(anim, oSelf.speed);
						return;
					}
					if (oSelf.direction === 'V') {
						if ((oSelf.itemHeight * oSelf.lastIndex - oSelf.scrollValue) <= 0) {
							oSelf.scrollValue = 0;
						}
						else {
							dist = Math.ceil(((oSelf.itemHeight * oSelf.lastIndex) - oSelf.scrollValue) / 10);
							oSelf.scrollValue += dist;
							oSelf.scrollHeight += dist;
						}
						oSelf.scrollArea.scrollTop = oSelf.scrollValue;
						if (oSelf.scrollHeight % oSelf.itemHeight === 0) {
							oSelf.lastIndex += 1;
							if (oSelf.lastIndex === (oSelf.length+1)) {
								oSelf.lastIndex = 0;
							}
							if (!oSelf.lastIndex) {
								oSelf.scrollTimer = setTimeout(anim, oSelf.chgUnitTime/2);
							}
							else{
								oSelf.scrollTimer = setTimeout(anim, oSelf.chgUnitTime);
							}
						}
						else {
							oSelf.scrollTimer = setTimeout(anim, oSelf.speed);
						}
					}
					else {
						if ((oSelf.itemWidth * oSelf.lastIndex) - oSelf.scrollValue <= 0) {
							oSelf.scrollValue = 0;
						}
						else {
							dist = Math.ceil(((oSelf.itemWidth * oSelf.lastIndex) - oSelf.scrollValue) / 10);
							oSelf.scrollValue += dist;
							oSelf.scrollWidth += dist;
						}
						oSelf.scrollArea.scrollLeft = oSelf.scrollValue;
						if (oSelf.scrollWidth % oSelf.itemWidth === 0) {
							oSelf.lastIndex += 1;
							if (oSelf.lastIndex === (oSelf.length+1)) {
								oSelf.lastIndex = 0;
							}
							if (!oSelf.lastIndex) {
								oSelf.scrollTimer = setTimeout(anim, oSelf.chgUnitTime/2);
							}
							else{
								oSelf.scrollTimer = setTimeout(anim, oSelf.chgUnitTime);
							}
						}
						else {
							oSelf.scrollTimer = setTimeout(anim, oSelf.speed);
						}
					}
				};
				anim();
			};

			var YScroll = function(){
				var i, len = arguments.length, news = [], timer = [];
				for (i = 0; i < len; ++i) {
					news[i] = new scrollNews(arguments[i]);
					timer[i] = setTimeout(function(index){
						return function(){
							if (timer[index]) {
								clearTimeout(timer[index]);
							}
							news[index].isPause = false;
						}
					}(i), news[i].pauseTime);
					
					news[i].scrollArea.onmouseover = function(index){
						return function(){
							news[index].isPause = true;
						}
					}(i);
					news[i].scrollArea.onmouseout = function(index){
						return function(){
							news[index].isPause = false;
						}
					}(i);
					news[i].play();
				}
				return news;
			};
			</textarea>
		</div>
	</div>
	<script language="javascript" type="text/javascript" src="js/scrollnews.js"></script>
	<script language="javascript" type="text/javascript">
		YScroll({
			area: 'scrollnews',
			msg: 'scrollnews_con',
			items: 'ul',
			speed: 10,
			direction: 'H'
		}, {
			area: 'scrollnews_v',
			msg: 'scrollnews_con_v',
			items: 'ul',
			speed: 50
		});
	</script>
</body>

</html>
